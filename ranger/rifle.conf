# ═══════════════════════════════════════════════════════════════════════════════
# RIFLE - File Associations for Ranger
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Web
# ─────────────────────────────────────────────────────────────────────────────
ext x?html?, has firefox,          X, flag f = firefox -- "$@"
ext x?html?, has chromium-browser, X, flag f = chromium-browser -- "$@"

# ─────────────────────────────────────────────────────────────────────────────
# Text/Code
# ─────────────────────────────────────────────────────────────────────────────
mime ^text, label editor = ${EDITOR:-micro} -- "$@"
mime ^text, label pager  = ${PAGER:-less} -- "$@"

ext py  = python -- "$1"
ext sh  = bash -- "$1"
ext pl  = perl -- "$1"
ext rb  = ruby -- "$1"
ext js  = node -- "$1"
ext rs  = rustc -- "$1"
ext go  = go run -- "$1"

# ─────────────────────────────────────────────────────────────────────────────
# Documents
# ─────────────────────────────────────────────────────────────────────────────
ext pdf, has zathura,  X, flag f = zathura -- "$@"
ext pdf, has evince,   X, flag f = evince -- "$@"
ext pdf, has firefox,  X, flag f = firefox -- "$@"

ext docx?, has libreoffice, X, flag f = libreoffice "$@"
ext xlsx?, has libreoffice, X, flag f = libreoffice "$@"
ext pptx?, has libreoffice, X, flag f = libreoffice "$@"
ext od[tspg], has libreoffice, X, flag f = libreoffice "$@"

# ─────────────────────────────────────────────────────────────────────────────
# Images
# ─────────────────────────────────────────────────────────────────────────────
mime ^image, has imv,      X, flag f = imv -- "$@"
mime ^image, has feh,      X, flag f = feh -- "$@"
mime ^image, has gimp,     X, flag f = gimp -- "$@"

# ─────────────────────────────────────────────────────────────────────────────
# Video/Audio
# ─────────────────────────────────────────────────────────────────────────────
mime ^video,       has mpv,      X, flag f = mpv -- "$@"
mime ^video,       has vlc,      X, flag f = vlc -- "$@"
mime ^audio|ogg$,  has mpv,      X, flag f = mpv -- "$@"
mime ^audio|ogg$,  has vlc,      X, flag f = vlc -- "$@"

# ─────────────────────────────────────────────────────────────────────────────
# Archives
# ─────────────────────────────────────────────────────────────────────────────
ext 7z|ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz,     has file-roller, X, flag f = file-roller -- "$@"
ext iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip,    has file-roller, X, flag f = file-roller -- "$@"

ext 7z|ace|ar|arc|bz2?|cab|cpio|cpt|deb|dgc|dmg|gz,     has ark, X, flag f = ark -- "$@"
ext iso|jar|msi|pkg|rar|shar|tar|tgz|xar|xpi|xz|zip,    has ark, X, flag f = ark -- "$@"

# Fallback
ext tar|gz        = tar -xvzf "$1"
ext tar.bz2|bz2   = tar -xvjf "$1"
ext tar.xz|xz     = tar -xvJf "$1"
ext zip           = unzip "$1"
ext rar           = unrar x "$1"
ext 7z            = 7z x "$1"

# ─────────────────────────────────────────────────────────────────────────────
# Fallback
# ─────────────────────────────────────────────────────────────────────────────
label open, has xdg-open = xdg-open -- "$@"
